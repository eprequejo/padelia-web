<!-- index.html -->
<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Padelia ‚Äî Buscador de torneos de p√°del</title>
    <meta
      name="description"
      content="Padelia te ayuda a encontrar torneos y planes de p√°del sin perder tiempo saltando entre apps. Dilo como lo dir√≠as y ve directo a inscribirte."
    />

    <!-- PWA Meta Tags -->
    <meta name="description" content="Encuentra tu pr√≥ximo torneo de p√°del" />
    <meta name="theme-color" content="#6F2DBD" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Padelia" />
    
    <!-- Manifest -->
    <link rel="manifest" href="../manifest.json" />
    
    <!-- Icons -->
    <link rel="icon" href="../assets/logo.svg" />
    <link rel="apple-touch-icon" href="../assets/icon-192.png" />

    <link rel="stylesheet" href="./assets/palette.css" />
    <link rel="stylesheet" href="./assets/styles.css" />
    <link rel="icon" href="./assets/logo.svg" />
  </head>

  <body>
    <div class="bg"></div>

    <header class="topbar">
      <div class="topbar__inner">
        <a class="brand" href="./" aria-label="Padelia">
          <img src="./assets/logo.svg" alt="" class="brand__icon" aria-hidden="true" />
          <span class="brand__name">Padelia</span>
          <span class="brand__badge">beta</span>
        </a>

        <nav class="nav">
          <a href="#que-es">Qu√© es</a>
          <a href="#como-funciona">C√≥mo funciona</a>
          <a href="#app">App</a>
          <a href="#alta-torneo">Dar de alta</a>
        </nav>

        <div class="actions">
          <a class="btn btn--ghost" href="#login" aria-disabled="true">Log in</a>
          <a class="btn btn--primary" href="#app">Descargar app</a>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="hero">
        <h1>Tu p√°del empieza con un mensaje</h1>
        <p class="subtitle">
          ¬øQu√© torneo te apetece jugar?
        </p>

        <div class="chatbox" role="search">
          <div class="chatbox__inputWrap">
            <input
              id="prompt"
              class="chatbox__input"
              type="text"
              placeholder="‚ÄúTorneos este finde cerca de Mijas, nivel 3‚Äù"
              autocomplete="off"
            />
          </div>
          <button id="go" class="chatbox__btn" type="button">Chatear</button>
        </div>

        <p class="hero__hint">
          Pensado para jugadores <strong>amateur</strong>. R√°pido, simple y directo a lo importante.
        </p>
      </section>

      <section id="que-es" class="section">
        <h2>Qu√© es</h2>

        <p>
          <strong>Padelia te ayuda a encontrar torneos y planes de p√°del sin perder tiempo buscando en mil apps.</strong>
        </p>

        <p>
          T√∫ dices lo que quieres (zona, fecha, nivel) y Padelia te muestra opciones claras
          para que puedas ir <strong>directo a inscribirte</strong>.
        </p>

        <p>
          <em>Estamos en beta:</em> si algo no te encaja, d√≠melo. Ese feedback vale oro üíú
        </p>

        <p>
          <em>Pr√≥ximamente:</em> podr√°s escribir ‚Äúav√≠same‚Äù y Padelia te avisar√° cuando salga un torneo parecido.
        </p>
      </section>

      <section id="como-funciona" class="section section--split">
        <div class="split">
          <div class="split__left">
            <h2>C√≥mo funciona</h2>

            <p>
              <strong>No cambias tu forma de hablar. Cambias tu forma de encontrar torneos.</strong>
            </p>

            <div class="steps">
              <div class="step">
                <h3>1. Pide lo que te apetece</h3>
                <p>‚ÄúEste finde‚Äù, ‚Äúmixto‚Äù, ‚Äúnivel 3‚Äù, ‚Äúcerca de m√≠‚Äù, ‚Äúpor M√°laga‚Äù, ‚Äúma√±ana‚Äù.</p>
              </div>

              <div class="step">
                <h3>2. Recibe opciones claras</h3>
                <p>Nombre, fecha, zona, nivel/categor√≠as y enlace cuando existe.</p>
              </div>

              <div class="step">
                <h3>3. Entra y ap√∫ntate</h3>
                <p>Un clic y est√°s en el sitio correcto para inscribirte o ver m√°s info.</p>
              </div>

              <div class="step step--soon">
                <h3>4. Pr√≥ximamente: ‚Äúav√≠same‚Äù y te notificamos</h3>
                <p>
                  Guarda una b√∫squeda (zona + nivel + fechas) y Padelia te avisar√° cuando aparezca un torneo que encaje contigo.
                </p>
                <span class="badge badge--soon">Pr√≥ximamente</span>
              </div>

            </div>
          </div>

          <div class="split__right">
            <div class="chatMock">
              <div class="chatMock__header">
                <div class="chatMock__brand">
                  <img src="./assets/logo.svg" class="chatMock__logo" alt="" aria-hidden="true" />
                  <span class="chatMock__title">Padelia ¬∑ beta</span>
                </div>
                <span class="chatMock__meta">Demo</span>
              </div>

              <div class="chatMock__body">
                <div class="msg msg--user">
                  Torneos este finde por Mijas/Fuengirola, nivel 3, mixto.
                </div>

                <div class="msg msg--bot">
                  Te paso 3 opciones por fecha y zona. ¬øPrefieres solo mixtos o tambi√©n femeninos?
                </div>

                <div class="msg msg--bot">
                  1) Mixto nivel 3 ¬∑ Fuengirola ¬∑ S√°bado ¬∑ <strong>Inscribirme</strong><br/>
                  2) Mixto nivel 3 ¬∑ Mijas ¬∑ Domingo ¬∑ <strong>Inscribirme</strong><br/>
                  3) Mixto nivel 3 ¬∑ M√°laga ¬∑ Domingo ¬∑ <strong>Inscribirme</strong>
                </div>
              </div>

              <div class="chatMock__composer">
                <div class="chatMock__inputWrap">
                  <input type="text" disabled />
                </div>
                <button disabled>Chatear</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="app" class="section section--app">
        <h2>La app de Padelia</h2>
        <p>
          Padelia funciona como una app normal. Pulsa ‚ÄúDescargar‚Äù y a√±√°dela a tu m√≥vil desde el navegador.
        </p>
        <div class="appRow">
          <a class="btn btn--primary" href="./chat/" id="downloadPwa">Descargar app</a>
          <a class="btn btn--ghost" href="#como-funciona">Ver c√≥mo funciona</a>
          <!-- Toast para iOS -->
          <div id="iosInstallToast" class="install-toast" hidden>
            <div class="install-toast__content">
              <strong>Instalar Padelia</strong>
              <p>
                1. Toca el bot√≥n <strong>Compartir</strong> 
                <svg width="16" height="16" fill="currentColor"><use href="#icon-share"/></svg>
              </p>
              <p>2. Selecciona <strong>"A√±adir a inicio"</strong></p>
              <button class="install-toast__close">Entendido</button>
            </div>
          </div>
        </div>
      </section>

      <section id="alta-torneo" class="section section--cta">
        <div class="ctaCard">
          <div class="ctaCard__text">
            <h2>
              ¬øQuieres que Padelia hable de tu torneo?
              <span class="badge badge--soon">Pr√≥ximamente</span>
            </h2>

            <p>
              Si organizas un torneo (club, circuito o evento), dalo de alta y lo incluiremos en Padelia.
              <strong>Estamos construy√©ndolo</strong>, pero queremos priorizar esto pronto.
            </p>

            <ul class="ctaList">
              <li>Aparece con enlace de inscripci√≥n</li>
              <li>Mejor visibilidad para jugadores de tu zona</li>
              <li>Feedback r√°pido para mejorarlo</li>
            </ul>
          </div>

          <div class="ctaCard__actions">
            <a class="btn btn--primary" href="#wip-alta-torneo" id="btnAltaTorneo">
              Dar de alta mi torneo
            </a>
          </div>
        </div>

        <div class="wipNotice" id="wipAltaTorneo" hidden>
          <div class="wipNotice__inner">
            <strong>Work in progress</strong>
            <p>
              Estamos preparando el alta de torneos. Si quieres, m√°ndanos un email con el enlace del torneo
              y lo intentamos incluir manualmente en la beta.
            </p>
            <a class="link" href="mailto:eprequejo@gmail.com?subject=Padelia%20-%20Alta%20de%20torneo">
              Enviar por email
            </a>
          </div>
        </div>
      </section>


      <footer class="footer">
        <div class="footer__inner">
          <span>¬© <span id="year"></span> Padelia</span>
          <span class="sep">¬∑</span>
          <a class="link" href="#privacy">Privacidad</a>
          <span class="sep">¬∑</span>
          <a class="link" href="#terms">T√©rminos</a>
          <span class="sep">¬∑</span>
          <a class="link" href="mailto:eprequejo@gmail.com">Feedback</a>
        </div>
      </footer>
    </main>

    <script>
      const input = document.getElementById("prompt");
      const go = document.getElementById("go");

      function startChat() {
        const q = (input.value || "").trim();
        const target = "./chat/?q=" + encodeURIComponent(q);
        window.location.href = target;
      }

      go.addEventListener("click", startChat);
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") startChat();
      });

      document.getElementById("year").textContent = new Date().getFullYear();

      // PWA Installation Logic
      let deferredPrompt;
      const downloadBtn = document.getElementById('downloadPwa');
      const iosToast = document.getElementById('iosInstallToast');

      // Detectar si ya est√° instalado
      if (window.matchMedia('(display-mode: standalone)').matches) {
        downloadBtn.textContent = 'Abrir chat';
        downloadBtn.href = './chat/';
      }

      // Android: Capturar evento de instalaci√≥n
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        // Cambiar comportamiento del bot√≥n
        downloadBtn.addEventListener('click', async (event) => {
          event.preventDefault();
          
          if (deferredPrompt) {
            // Mostrar prompt nativo de Android
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
              console.log('App instalada');
            }
            deferredPrompt = null;
          }
        });
      });

      // iOS: Mostrar instrucciones
      const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
      if (isIOS && !window.navigator.standalone) {
        downloadBtn.addEventListener('click', (e) => {
          // Dejar que vaya al chat, pero mostrar toast
          setTimeout(() => {
            iosToast.hidden = false;
          }, 500);
        });
        
        // Cerrar toast
        iosToast.querySelector('.install-toast__close').addEventListener('click', () => {
          iosToast.hidden = true;
        });
      }

      // Evento cuando se instala
      window.addEventListener('appinstalled', () => {
        console.log('PWA instalada');
        downloadBtn.textContent = 'Abrir chat';
      });

    </script>
  </body>
</html>
